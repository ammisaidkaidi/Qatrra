/* esm.sh - @supabase/storage-js@2.76.1 */
import { Buffer as __Buffer$ } from "/node/buffer.mjs";
import{__awaiter as m}from"/tslib@2.8.1/es2022/tslib.mjs";var O=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function u(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var L=class extends O{constructor(t,r,e){super(t),this.name="StorageApiError",this.status=r,this.statusCode=e}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},w=class extends O{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}};import{__awaiter as g}from"/tslib@2.8.1/es2022/tslib.mjs";import{__awaiter as ut}from"/tslib@2.8.1/es2022/tslib.mjs";var E=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>import("/@supabase/node-fetch@2.6.15/es2022/node-fetch.mjs").then(({default:e})=>e(...r)):t=fetch,(...r)=>t(...r)},et=()=>ut(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("/@supabase/node-fetch@2.6.15/es2022/node-fetch.mjs")).Response:Response}),q=s=>{if(Array.isArray(s))return s.map(r=>q(r));if(typeof s=="function"||s!==Object(s))return s;let t={};return Object.entries(s).forEach(([r,e])=>{let o=r.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));t[o]=q(e)}),t},ot=s=>{if(typeof s!="object"||s===null)return!1;let t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var G=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),ct=(s,t,r)=>g(void 0,void 0,void 0,function*(){let e=yield et();s instanceof e&&!r?.noResolveJson?s.json().then(o=>{let n=s.status||500,i=o?.statusCode||n+"";t(new L(G(o),n,i))}).catch(o=>{t(new w(G(o),o))}):t(new w(G(s),s))}),dt=(s,t,r,e)=>{let o={method:s,headers:t?.headers||{}};return s==="GET"||!e?o:(ot(e)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(e)):o.body=e,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r))};function I(s,t,r,e,o,n){return g(this,void 0,void 0,function*(){return new Promise((i,h)=>{s(r,dt(t,e,o,n)).then(a=>{if(!a.ok)throw a;return e?.noResolveJson?a:a.json()}).then(a=>i(a)).catch(a=>ct(a,h,e))})})}function v(s,t,r,e){return g(this,void 0,void 0,function*(){return I(s,"GET",t,r,e)})}function f(s,t,r,e,o){return g(this,void 0,void 0,function*(){return I(s,"POST",t,e,o,r)})}function P(s,t,r,e,o){return g(this,void 0,void 0,function*(){return I(s,"PUT",t,e,o,r)})}function st(s,t,r,e){return g(this,void 0,void 0,function*(){return I(s,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),e)})}function x(s,t,r,e,o){return g(this,void 0,void 0,function*(){return I(s,"DELETE",t,e,o,r)})}import{__awaiter as ft}from"/tslib@2.8.1/es2022/tslib.mjs";import{__awaiter as lt}from"/tslib@2.8.1/es2022/tslib.mjs";var B=class{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return lt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(u(t))return{data:null,error:t};throw t}})}};var nt,X=class{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[nt]="BlobDownloadBuilder",this.promise=null}asStream(){return new B(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ft(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(u(t))return{data:null,error:t};throw t}})}};nt=Symbol.toStringTag;var it=X;var mt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},at={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},F=class{constructor(t,r={},e,o){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=e,this.fetch=E(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,e,o){return m(this,void 0,void 0,function*(){try{let n,i=Object.assign(Object.assign({},at),o),h=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)}),a=i.metadata;typeof Blob<"u"&&e instanceof Blob?(n=new FormData,n.append("cacheControl",i.cacheControl),a&&n.append("metadata",this.encodeMetadata(a)),n.append("",e)):typeof FormData<"u"&&e instanceof FormData?(n=e,n.append("cacheControl",i.cacheControl),a&&n.append("metadata",this.encodeMetadata(a))):(n=e,h["cache-control"]=`max-age=${i.cacheControl}`,h["content-type"]=i.contentType,a&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),o?.headers&&(h=Object.assign(Object.assign({},h),o.headers));let d=this._removeEmptyFolders(r),V=this._getFinalPath(d),D=yield(t=="PUT"?P:f)(this.fetch,`${this.url}/object/${V}`,n,Object.assign({headers:h},i?.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:D.Id,fullPath:D.Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(u(n))return{data:null,error:n};throw n}})}upload(t,r,e){return m(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,e)})}uploadToSignedUrl(t,r,e,o){return m(this,void 0,void 0,function*(){let n=this._removeEmptyFolders(t),i=this._getFinalPath(n),h=new URL(this.url+`/object/upload/sign/${i}`);h.searchParams.set("token",r);try{let a,d=Object.assign({upsert:at.upsert},o),V=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&e instanceof Blob?(a=new FormData,a.append("cacheControl",d.cacheControl),a.append("",e)):typeof FormData<"u"&&e instanceof FormData?(a=e,a.append("cacheControl",d.cacheControl)):(a=e,V["cache-control"]=`max-age=${d.cacheControl}`,V["content-type"]=d.contentType);let D=yield P(this.fetch,h.toString(),a,{headers:V});return{data:{path:n,fullPath:D.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(u(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(t,r){return m(this,void 0,void 0,function*(){try{let e=this._getFinalPath(t),o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");let n=yield f(this.fetch,`${this.url}/object/upload/sign/${e}`,{},{headers:o}),i=new URL(this.url+n.url),h=i.searchParams.get("token");if(!h)throw new O("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:h},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(u(e))return{data:null,error:e};throw e}})}update(t,r,e){return m(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,e)})}move(t,r,e){return m(this,void 0,void 0,function*(){try{return{data:yield f(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:e?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(u(o))return{data:null,error:o};throw o}})}copy(t,r,e){return m(this,void 0,void 0,function*(){try{return{data:{path:(yield f(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:e?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(u(o))return{data:null,error:o};throw o}})}createSignedUrl(t,r,e){return m(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),n=yield f(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},e?.transform?{transform:e.transform}:{}),{headers:this.headers}),i=e?.download?`&download=${e.download===!0?"":e.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${i}`)},{data:n,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(u(o))return{data:null,error:o};throw o}})}createSignedUrls(t,r,e){return m(this,void 0,void 0,function*(){try{let o=yield f(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),n=e?.download?`&download=${e.download===!0?"":e.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${n}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(u(o))return{data:null,error:o};throw o}})}download(t,r){let o=typeof r?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(r?.transform||{}),i=n?`?${n}`:"",h=this._getFinalPath(t),a=()=>v(this.fetch,`${this.url}/${o}/${h}${i}`,{headers:this.headers,noResolveJson:!0});return new it(a,this.shouldThrowOnError)}info(t){return m(this,void 0,void 0,function*(){let r=this._getFinalPath(t);try{let e=yield v(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:q(e),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(u(e))return{data:null,error:e};throw e}})}exists(t){return m(this,void 0,void 0,function*(){let r=this._getFinalPath(t);try{return yield st(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(u(e)&&e instanceof w){let o=e.originalError;if([400,404].includes(o?.status))return{data:!1,error:e}}throw e}})}getPublicUrl(t,r){let e=this._getFinalPath(t),o=[],n=r?.download?`download=${r.download===!0?"":r.download}`:"";n!==""&&o.push(n);let h=typeof r?.transform<"u"?"render/image":"object",a=this.transformOptsToQueryString(r?.transform||{});a!==""&&o.push(a);let d=o.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${e}${d}`)}}}remove(t){return m(this,void 0,void 0,function*(){try{return{data:yield x(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(u(r))return{data:null,error:r};throw r}})}list(t,r,e){return m(this,void 0,void 0,function*(){try{let o=Object.assign(Object.assign(Object.assign({},mt),r),{prefix:t||""});return{data:yield f(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},e),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(u(o))return{data:null,error:o};throw o}})}listV2(t,r){return m(this,void 0,void 0,function*(){try{let e=Object.assign({},t);return{data:yield f(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,e,{headers:this.headers},r),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(u(e))return{data:null,error:e};throw e}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof __Buffer$<"u"?__Buffer$.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}};import{__awaiter as T}from"/tslib@2.8.1/es2022/tslib.mjs";var H="2.76.1";var J={"X-Client-Info":`storage-js/${H}`};var N=class{constructor(t,r={},e,o){this.shouldThrowOnError=!1;let n=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J),r),this.fetch=E(e)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return T(this,void 0,void 0,function*(){try{return{data:yield v(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(u(t))return{data:null,error:t};throw t}})}getBucket(t){return T(this,void 0,void 0,function*(){try{return{data:yield v(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(u(r))return{data:null,error:r};throw r}})}createBucket(t){return T(this,arguments,void 0,function*(r,e={public:!1}){try{return{data:yield f(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(u(o))return{data:null,error:o};throw o}})}updateBucket(t,r){return T(this,void 0,void 0,function*(){try{return{data:yield P(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(u(e))return{data:null,error:e};throw e}})}emptyBucket(t){return T(this,void 0,void 0,function*(){try{return{data:yield f(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(u(r))return{data:null,error:r};throw r}})}deleteBucket(t){return T(this,void 0,void 0,function*(){try{return{data:yield x(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(u(r))return{data:null,error:r};throw r}})}};import{__awaiter as Y}from"/tslib@2.8.1/es2022/tslib.mjs";var j=class{constructor(t,r={},e){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J),r),this.fetch=E(e)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Y(this,void 0,void 0,function*(){try{return{data:yield f(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(u(r))return{data:null,error:r};throw r}})}listBuckets(t){return Y(this,void 0,void 0,function*(){try{let r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);let e=r.toString(),o=e?`${this.url}/bucket?${e}`:`${this.url}/bucket`,n=yield v(this.fetch,o,{headers:this.headers});return{data:Array.isArray(n)?n.filter(h=>h.type==="ANALYTICS"):[],error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(u(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Y(this,void 0,void 0,function*(){try{return{data:yield x(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(u(r))return{data:null,error:r};throw r}})}};import{__awaiter as p}from"/tslib@2.8.1/es2022/tslib.mjs";import{__awaiter as z}from"/tslib@2.8.1/es2022/tslib.mjs";var _={"X-Client-Info":`storage-js/${H}`,"Content-Type":"application/json"};var C=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function c(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}var y=class extends C{constructor(t,r,e){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=e}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},U=class extends C{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}},W;(function(s){s.InternalError="InternalError",s.S3VectorConflictException="S3VectorConflictException",s.S3VectorNotFoundException="S3VectorNotFoundException",s.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",s.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",s.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(W||(W={}));import{__awaiter as tt}from"/tslib@2.8.1/es2022/tslib.mjs";import{__awaiter as pt}from"/tslib@2.8.1/es2022/tslib.mjs";var b=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>import("/@supabase/node-fetch@2.6.15/es2022/node-fetch.mjs").then(({default:e})=>e(...r)):t=fetch,(...r)=>t(...r)},vt=()=>pt(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("/@supabase/node-fetch@2.6.15/es2022/node-fetch.mjs")).Response:Response}),Z=s=>{if(typeof s!="object"||s===null)return!1;let t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},wt=s=>Array.from(new Float32Array(s)),gt=(s,t)=>{if(t!==void 0&&s.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${s.float32.length}`)};var ht=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),yt=(s,t,r)=>tt(void 0,void 0,void 0,function*(){if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!r?.noResolveJson){let o=s.status||500,n=s;if(typeof n.json=="function")n.json().then(i=>{let h=i?.statusCode||i?.code||o+"";t(new y(ht(i),o,h))}).catch(()=>{let i=o+"",h=n.statusText||`HTTP ${o} error`;t(new y(h,o,i))});else{let i=o+"",h=n.statusText||`HTTP ${o} error`;t(new y(h,o,i))}}else t(new U(ht(s),s))}),bt=(s,t,r,e)=>{let o={method:s,headers:t?.headers||{}};return s==="GET"||!e?o:(Z(e)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(e)):o.body=e,Object.assign(Object.assign({},o),r))};function Ot(s,t,r,e,o,n){return tt(this,void 0,void 0,function*(){return new Promise((i,h)=>{s(r,bt(t,e,o,n)).then(a=>{if(!a.ok)throw a;if(e?.noResolveJson)return a;let d=a.headers.get("content-type");return!d||!d.includes("application/json")?{}:a.json()}).then(a=>i(a)).catch(a=>yt(a,h,e))})})}function l(s,t,r,e,o){return tt(this,void 0,void 0,function*(){return Ot(s,"POST",t,e,o,r)})}var $=class{constructor(t,r={},e){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_),r),this.fetch=b(e)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return z(this,void 0,void 0,function*(){try{return{data:(yield l(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(c(r))return{data:null,error:r};throw r}})}getIndex(t,r){return z(this,void 0,void 0,function*(){try{return{data:yield l(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(c(e))return{data:null,error:e};throw e}})}listIndexes(t){return z(this,void 0,void 0,function*(){try{return{data:yield l(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(c(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return z(this,void 0,void 0,function*(){try{return{data:(yield l(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(c(e))return{data:null,error:e};throw e}})}};import{__awaiter as R}from"/tslib@2.8.1/es2022/tslib.mjs";var S=class{constructor(t,r={},e){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_),r),this.fetch=b(e)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return R(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield l(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(c(r))return{data:null,error:r};throw r}})}getVectors(t){return R(this,void 0,void 0,function*(){try{return{data:yield l(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(c(r))return{data:null,error:r};throw r}})}listVectors(t){return R(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield l(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(c(r))return{data:null,error:r};throw r}})}queryVectors(t){return R(this,void 0,void 0,function*(){try{return{data:yield l(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(c(r))return{data:null,error:r};throw r}})}deleteVectors(t){return R(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield l(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(c(r))return{data:null,error:r};throw r}})}};import{__awaiter as M}from"/tslib@2.8.1/es2022/tslib.mjs";var k=class{constructor(t,r={},e){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_),r),this.fetch=b(e)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return M(this,void 0,void 0,function*(){try{return{data:(yield l(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(c(r))return{data:null,error:r};throw r}})}getBucket(t){return M(this,void 0,void 0,function*(){try{return{data:yield l(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(c(r))return{data:null,error:r};throw r}})}listBuckets(){return M(this,arguments,void 0,function*(t={}){try{return{data:yield l(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(c(r))return{data:null,error:r};throw r}})}deleteBucket(t){return M(this,void 0,void 0,function*(){try{return{data:(yield l(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(c(r))return{data:null,error:r};throw r}})}};var A=class extends k{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new K(this.url,this.headers,t,this.fetch)}},K=class extends ${constructor(t,r,e,o){super(t,r,o),this.vectorBucketName=e}createIndex(t){let r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return p(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return p(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){let r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return p(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){let r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return p(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new Q(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Q=class extends S{constructor(t,r,e,o,n){super(t,r,n),this.vectorBucketName=e,this.indexName=o}putVectors(t){let r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return p(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){let r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return p(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return p(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){let r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return p(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){let r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return p(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}};var rt=class extends N{constructor(t,r={},e,o){super(t,r,e,o)}from(t){return new F(this.url,this.headers,t,this.fetch)}get vectors(){return new A(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new j(this.url+"/iceberg",this.headers,this.fetch)}};export{j as StorageAnalyticsApi,L as StorageApiError,rt as StorageClient,O as StorageError,w as StorageUnknownError,y as StorageVectorsApiError,A as StorageVectorsClient,C as StorageVectorsError,W as StorageVectorsErrorCode,U as StorageVectorsUnknownError,k as VectorBucketApi,K as VectorBucketScope,S as VectorDataApi,$ as VectorIndexApi,Q as VectorIndexScope,Z as isPlainObject,u as isStorageError,c as isStorageVectorsError,wt as normalizeToFloat32,b as resolveFetch,vt as resolveResponse,gt as validateVectorDimension};
//# sourceMappingURL=storage-js.mjs.map